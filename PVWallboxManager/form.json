{
  "elements": [
    {
      "type": "ExpansionPanel",
      "caption": "üõë Modulsteuerung",
      "items": [
        {
          "type": "CheckBox",
          "name": "ModulAktiv",
          "caption": "Modul aktiv (bei Deaktivierung werden keine Aktionen ausgef√ºhrt)"}
      ]
    },
    {
      "type": "ExpansionPanel",
      "caption": "üîå Wallbox-Konfiguration",
      "items": [
        { "type": "Label", "label": "‚öôÔ∏è Konfiguriere hier deine GO-e Wallbox und Ladeparameter." },
        { "type": "Label", "label": "üÜî Auswahl deiner GO-e Charger Instanz:" },
        { "type": "SelectInstance", "name": "GOEChargerID", "caption": "GO-e Instanz", "validClasses": ["GOeCharger"] },
        { "type": "Label", "label": "üîß Minimale Stromst√§rke in Ampere f√ºr den Ladevorgang (ganzzahlig, z.B. 6)." },
        { "type": "NumberSpinner", "name": "MinAmpere", "caption": "Minimaler Ladestrom (A)" },
        { "type": "Label", "label": "üîß Maximale Stromst√§rke in Ampere f√ºr den Ladevorgang (ganzzahlig, z.B. 16)." },
        { "type": "NumberSpinner", "name": "MaxAmpere", "caption": "Maximaler Ladestrom (A)" },
        { "type": "Label", "label": "‚ö° Mindest√ºberschuss, ab dem die Wallbox l√§dt (in Watt, nur positiv)." },
        { "type": "NumberSpinner", "name": "MinLadeWatt", "caption": "Start bei PV-√úberschuss (W)" },
        { "type": "Label", "label": "üõë Leistungsgrenze, unter der die Ladung gestoppt wird (in Watt, kann auch negativ f√ºr Defizit sein)." },
        { "type": "NumberSpinner", "name": "MinStopWatt", "caption": "Stoppen bei Defizit (W)" }
      ]
    },
    {
      "type": "ExpansionPanel",
      "caption": "üåû Energiequellen",
      "items": [
        { "type": "Label", "label": "üåÖ PV-Erzeugung (Pflichtvariable): Leistung der PV-Anlage in Watt." },
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "PVErzeugungID", "caption": "PV-Erzeugung (W)", "validVariableTypes": [2] },
          { "type": "Label", "caption": "    " },
          { "type": "Select", "name": "PVErzeugungEinheit", "caption": "Einheit", "options": [
            { "caption": "Watt (W)", "value": "W" },
            { "caption": "Kilowatt (kW)", "value": "kW" } ], "default": "W" }
        ]},
        { "type": "Label", "label": "üîå Netzeinspeisung (optional): Positiv = Einspeisung, negativ = Bezug. Einheit: Watt." },
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "NetzeinspeisungID", "caption": "Netzeinspeisung" },
          { "type": "Label", "caption": "    " },
          { "type": "Select", "name": "NetzeinspeisungEinheit", "caption": "Einheit", "options": [
            { "caption": "Watt (W)", "value": "W" },
            { "caption": "Kilowatt (kW)", "value": "kW" } ], "default": "W" },
          { "type": "Label", "caption": "         " },
          { "type": "CheckBox", "name": "InvertNetzeinspeisung", "caption": "Normal positiv. Falls dein Z√§hler negativ liefert, hier invertieren." }
        ]},
        { "type": "Label", "label": "üè† Hausverbrauch (Pflichtvariable): Aktueller Gesamtverbrauch in Watt." },
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "HausverbrauchID", "caption": "Hausverbrauch (W) - Wallboxleistung zum Fahrzeug", "validVariableTypes": [2] },
          { "type": "Label", "caption": "    " },
          { "type": "Select", "name": "HausverbrauchEinheit", "caption": "Einheit", "options": [
            { "caption": "Watt (W)", "value": "W" },
            { "caption": "Kilowatt (kW)", "value": "kW" } ], "default": "W" },
          { "type": "Label", "caption": "         " },
          { "type": "CheckBox", "name": "InvertHausverbrauch", "caption": "Normal positiv. Falls dein Z√§hler negativ liefert, hier invertieren." }
        ]},
        { "type": "Label", "label": "üîã Batterieladung (optional): Lade- oder Entladeleistung der Hausbatterie in Watt.  Wenn keine Variable ausgew√§hlt ist, wird 0 verwendet." },
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "BatterieladungID", "caption": "Batterieladung (W)", "validVariableTypes": [2] },
          { "type": "Label", "caption": "    " },
          { "type": "Select", "name": "BatterieladungEinheit", "caption": "Einheit", "options": [
            { "caption": "Watt (W)", "value": "W" },
            { "caption": "Kilowatt (kW)", "value": "kW" } ], "default": "W" },
          { "type": "Label", "caption": "         " },
          { "type": "CheckBox", "name": "InvertBatterieladung", "caption": "Positiv = Laden, negativ = Entladen. Falls dein System umgekehrte Vorzeichen liefert, hier invertieren." }
        ]},
        { "type": "Label", "label": "üîÑ Intervall f√ºr die Leistungsberechnung in Sekunden (15‚Äì600)." },
        { "type": "NumberSpinner", "name": "RefreshInterval", "caption": "Aktualisierungsintervall (s)", "minimum": 15, "maximum": 600 }
      ]
    },
    {
      "type": "ExpansionPanel",
      "caption": "‚ö° Phasenumschaltung",
      "items": [
        { "type": "Label", "label": "üî¢ Anfangswert Anzahl aktiver Phasen (1 oder 3)." },
        { "type": "NumberSpinner", "name": "Phasen", "caption": "Anzahl Phasen (Initialwert)" },
        { "type": "Label", "label": "‚¨áÔ∏è Schwelle in Watt zum Umschalten auf 1-phasig (positiv, z.B. 1000)." },
        { "type": "NumberSpinner", "name": "Phasen1Schwelle", "caption": "Schwelle auf 1-phasig (W)" },
        { "type": "Label", "label": "‚¨ÜÔ∏è Schwelle in Watt zum Umschalten auf 3-phasig (positiv, z.B. 4200)." },
        { "type": "NumberSpinner", "name": "Phasen3Schwelle", "caption": "Schwelle auf 3-phasig (W)" },
        { "type": "Label", "label": "üî¢ Z√§hlerlimit f√ºr stabile Umschaltung auf 1-phasig (ganzzahlig)." },
        { "type": "NumberSpinner", "name": "Phasen1Limit", "caption": "Z√§hlerlimit 1-phasig" },
        { "type": "Label", "label": "üî¢ Z√§hlerlimit f√ºr stabile Umschaltung auf 3-phasig (ganzzahlig)." },
        { "type": "NumberSpinner", "name": "Phasen3Limit", "caption": "Z√§hlerlimit 3-phasig" }
      ]
    },
    {
      "type": "ExpansionPanel",
      "caption": "üß† Intelligente Logik",
      "items": [
        // Dynamischer Puffer
        { "type": "RowLayout", "items": [
          { "type": "CheckBox", "name": "DynamischerPufferAktiv", "caption": "üßÆ Dynamischen Puffer aktivieren" }
        ]},
        { "type": "Label", "caption": "    " },
    
        // NurMitFahrzeug
        { "type": "RowLayout", "items": [
          { "type": "CheckBox", "name": "NurMitFahrzeug", "caption": "üöó Nur laden, wenn Fahrzeug verbunden" }
        ]},
        { "type": "Label", "caption": "    " },
    
        // PV-Verteilung
        { "type": "Label", "label": "‚öñÔ∏è PV-Leistung aufteilen (PV2Car-Regelung)" },
        { "type": "RowLayout", "items": [
          { "type": "CheckBox", "name": "PVVerteilenAktiv", "caption": "PV-Leistung aufteilen aktivieren" },
          { "type": "NumberSpinner", "name": "PVAnteilAuto", "caption": "Anteil f√ºrs Fahrzeug (%)", "suffix": "%", "visible": { "name": "PVVerteilenAktiv", "equals": true } }
        ]},
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "HausakkuSOCID", "caption": "Hausakku SoC (%)", "visible": { "name": "PVVerteilenAktiv", "equals": true } },
          { "type": "NumberSpinner", "name": "HausakkuSOCVollSchwelle", "caption": "Voll-Schwelle Hausbatterie (%)", "suffix": "%", "minimum": 50, "maximum": 100, "visible": { "name": "PVVerteilenAktiv", "equals": true } }
        ]},
        { "type": "Label", "caption": "    " },
    
        // Zielzeitladung
        { "type": "RowLayout", "items": [
          { "type": "NumberSpinner", "name": "TargetChargePreTime", "caption": "‚è±Ô∏è Umschaltzeit vor Zielzeit (h)", "suffix": "h", "minimum": 1, "maximum": 12 }
        ]},
        { "type": "Label", "caption": "    " },
    
        // Strompreisladen
        { "type": "Label", "label": "üí∂ Strompreisbasiertes Laden (dynamische Tarife)" },
        { "type": "RowLayout", "items": [
          { "type": "CheckBox", "name": "StrompreisModus", "caption": "‚Ç¨ Strompreisladen aktiv" },
          { "type": "SelectVariable", "name": "CurrentPriceID", "caption": "Aktueller Strompreis (‚Ç¨/kWh)", "validVariableTypes": [2] }
        ]},
        { "type": "RowLayout", "items": [
          { "type": "NumberSpinner", "name": "MinPrice", "caption": "Mindestpreis (‚Ç¨/kWh)", "suffix": "‚Ç¨/kWh", "digits": 3, "default": 0.00 },
          { "type": "NumberSpinner", "name": "MaxPrice", "caption": "H√∂chstpreis (‚Ç¨/kWh)", "suffix": "‚Ç¨/kWh", "digits": 3, "default": 0.20 }
        ]},
        { "type": "Label", "caption": "    " },
        { "type": "RowLayout", "items": [
          { "type": "SelectVariable", "name": "ForecastPriceID", "caption": "24h-Preisprognose (‚Ç¨/kWh, Array)", "validVariableTypes": [2], "optional": true }
        ]}
      ]
    },
    {
      "type": "ExpansionPanel",
      "caption": "üöó Fahrzeugdaten",
      "items": [
        { "type": "Label", "label": "üìä Fahrzeugdaten f√ºr SoC-basierte Ladesteuerung verwenden (optional)." },
        { "type": "CheckBox", "name": "UseCarSOC", "caption": "Fahrzeugdaten ber√ºcksichtigen" },
        { "type": "Label", "label": "üîã Aktueller SoC des Fahrzeugs (State of Charge, Einheit: %, positiv)." },
        { "type": "SelectVariable", "name": "CarSOCID", "caption": "Aktueller SoC (Variable)" },
        { "type": "Label", "label": "üîã Fallback SoC in %, wenn keine Variable angegeben ist (positiv)." },
        { "type": "NumberSpinner", "name": "CarSOCFallback", "caption": "Fallback SoC (%)", "suffix": "%" },
        { "type": "Label", "label": "üéØ Ziel-SoC f√ºr das Fahrzeug (Einheit: %, positiv, z.B. 80)." },
        { "type": "SelectVariable", "name": "CarTargetSOCID", "caption": "Ziel-SoC (Variable)" },
        { "type": "Label", "label": "üéØ Fallback Ziel-SoC in %, wenn keine Variable angegeben ist (positiv, z.B. 80)." },
        { "type": "NumberSpinner", "name": "CarTargetSOCFallback", "caption": "Fallback Ziel-SoC (%)", "suffix": "%" },
        { "type": "Label", "label": "üîã Batteriekapazit√§t des Fahrzeugs in kWh (z. B. 52 f√ºr ID.3 Pure)." },
        { "type": "NumberSpinner", "name": "CarBatteryCapacity", "caption": "Batteriekapazit√§t (kWh)", "suffix": "kWh" }
      ]
    }
  ]
}
